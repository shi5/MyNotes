## 进程

**线程是调度的基本单位，而进程则是资源拥有的基本单位**。

### 进程状态

- 创建
- 就绪
- 运行
- 阻塞
- 阻塞挂起
- 就绪挂起
- 终止

### PCB

进程控制块，是进程存在的唯一标识

结构：
- 进程描述信息
	- 进程标识符
	- 用户标识符
- 进程控制和管理信息
	- 进程状态
	- 进程优先级
- 资源分配清单
	- 有关内存信息，以及打开文件的列表和使用的IO设备信息
- CPU相关信息
	- CPU中各个寄存器的值

PCB是一般通过**链表**组织的，把相同状态的进程链在一起，组成各种队列
还可以通过索引的方式实现

### 进程上下文切换

切换的内容：既包括虚拟内存、栈、全局变量等用户空间的资源，也包含CPU寄存器和程序计数器、内核堆栈等内核空间的资源

### 线程

分类：
- 用户线程
	- 由用户线程库函数管理和调度
	- 操作系统不可见
- 内核线程
	- 由操作系统管理调度
- 轻量级进程 **（Light-weight process，LWP）**
	- **LWP与普通进程的区别也在于它只有一个最小的执行上下文和调度程序所需的统计信息**
	- 和内核线程是一对一的关系

用户线程和内核线程关系：多对一， 一对一， 多对多
用户线程和LWP对应关系：1 : 1、N : 1、M : N

存在问题：
当一部分线程阻塞进入中断时，其他线程无法运行，因为它们同属于一个进程，无法同时处于内核态又处于用户态
解决方法：
引用轻量级进程，当一个LWP阻塞时，不会影响另外一个LWP的运行，如下图：
![[Pasted image 20240429171034.png]]

### 进程通信方式

- 管道
	- 数据传输是单向的
	- 数据是缓存在内核中的
- 消息队列
	- 保存在内核中消息链表
	- 存在用户态与内核态的转换
	- 不足：通信不及时，消息大小有限制
- 信号量
- 信号
	- 唯一异步方式
- 共享内存
- socket