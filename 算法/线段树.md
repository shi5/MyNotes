优势：主要用于维护区间信息，可以实现$O(\log n)$ 的区间修改，还可以实现多种操作(加、乘)

## 定义
线段树是一棵平衡二叉树，父节点代表整个区间的和，越往下区间越小

数组`[1,2,3,4,5]`对应的线段树如下：
![[Pasted image 20231120105948.png]]

每个节点$p$的左右子节点的编号分别为 2$p$和 2$p+1$ ，假如节点 $p$ 储存区间 $[a,b]$ 的和，设 $mid=\lfloor (l+r)/2\rfloor$ ，那么两个子节点分别储存 $[l, mid]$ 和 $[mid+1,l]$ 的和。可以发现，左节点对应的区间长度，与右节点相同或者比之恰好多1。

可以通过`递归`的方式建立一棵线段树

## 区间修改

引入“懒标记”概念。对区间的修改可以不在第一时间生效，对于正好是线段树节点的区间，不继续递归更新，需要用到时再往下传递修改。